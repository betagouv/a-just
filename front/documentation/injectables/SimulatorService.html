<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>a-just-front documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">a-just-front documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Injectables</li>
  <li >SimulatorService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/services/simulator/simulator.service.ts</code>
        </p>



            <p class="comment">
                <h3>Extends</h3>
            </p>
            <p class="comment">
                        <code><a href="../classes/MainClass.html" target="_self" >MainClass</a></code>
            </p>


            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#chartAnnotationBox" >chartAnnotationBox</a>
                            </li>
                            <li>
                                <a href="#contentieuOrSubContentieuId" >contentieuOrSubContentieuId</a>
                            </li>
                            <li>
                                <a href="#dateStart" >dateStart</a>
                            </li>
                            <li>
                                <a href="#dateStop" >dateStop</a>
                            </li>
                            <li>
                                <a href="#endCurrentSituation" >endCurrentSituation</a>
                            </li>
                            <li>
                                <a href="#isLoading" >isLoading</a>
                            </li>
                            <li>
                                <a href="#selectedCategory" >selectedCategory</a>
                            </li>
                            <li>
                                <a href="#selectedFonctionsIds" >selectedFonctionsIds</a>
                            </li>
                            <li>
                                <a href="#situationActuelle" >situationActuelle</a>
                            </li>
                            <li>
                                <a href="#situationProjected" >situationProjected</a>
                            </li>
                            <li>
                                <a href="#situationSimulated" >situationSimulated</a>
                            </li>
                            <li>
                                <a href="#startCurrentSituation" >startCurrentSituation</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#generateData" >generateData</a>
                            </li>
                            <li>
                                <a href="#generateLinearData" >generateLinearData</a>
                            </li>
                            <li>
                                <a href="#getFieldValue" >getFieldValue</a>
                            </li>
                            <li>
                                <a href="#getHRPositions" >getHRPositions</a>
                            </li>
                            <li>
                                <a href="#getHRVentilation" >getHRVentilation</a>
                            </li>
                            <li>
                                <a href="#getHRVentilationOnPeriod" >getHRVentilationOnPeriod</a>
                            </li>
                            <li>
                                <a href="#getLabelTranslation" >getLabelTranslation</a>
                            </li>
                            <li>
                                <a href="#getSituation" >getSituation</a>
                            </li>
                            <li>
                                <a href="#range" >range</a>
                            </li>
                            <li>
                                <a href="#toSimulate" >toSimulate</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(serverService: <a href="../injectables/ServerService.html" target="_self">ServerService</a>, humanResourceService: <a href="../injectables/HumanResourceService.html" target="_self">HumanResourceService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/services/simulator/simulator.service.ts:56</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>serverService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ServerService.html" target="_self" >ServerService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>humanResourceService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/HumanResourceService.html" target="_self" >HumanResourceService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateData"></a>
                    <span class="name">
                        <span ><b>generateData</b></span>
                        <a href="#generateData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>generateData(value1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, size: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="303"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:303</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function used to get an Array of identical values</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>value1</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>size</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>lenght of the array</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>Array of values</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateLinearData"></a>
                    <span class="name">
                        <span ><b>generateLinearData</b></span>
                        <a href="#generateLinearData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>generateLinearData(value1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, value2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, step: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="279"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:279</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function used to generate a dataset using linear function</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>value1</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>start value</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>value2</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>end value</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>step</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>number of step between values</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>return a LinearDataset</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFieldValue"></a>
                    <span class="name">
                        <span ><b>getFieldValue</b></span>
                        <a href="#getFieldValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getFieldValue(param: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, data: SimulatorInterface | SimulationInterface | null, initialValue, toCompute)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="200"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:200</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get the value of the displayed field</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>param</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>label name</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>data</td>
                                    <td>
                                            <code>SimulatorInterface | SimulationInterface | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>simulated situation data object</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>initialValue</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                        <p>specified if initialValue need to be converted or not in case of % or month</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>toCompute</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                        <p>specified if the value returned is used afterwards to compute something, then let the value in decimal without unit</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>label value as string or float</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getHRPositions"></a>
                    <span class="name">
                        <span ><b>getHRPositions</b></span>
                        <a href="#getHRPositions"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getHRPositions(hr: <a href="../interfaces/HumanResourceInterface.html" target="_self">HumanResourceInterface[]</a>, referentiel: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, categories: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, date?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>, onPeriod?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, dateStop?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>, monthlyReport)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="319"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:319</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function used to get the formated positions (etp by category) of a human ressources</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>hr</td>
                                    <td>
                                                <code><a href="../interfaces/HumanResourceInterface.html" target="_self" >HumanResourceInterface[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>human ressource object</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>referentiel</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>contentieux object</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>categories</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>categories concerned</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>date</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>date of the position</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>onPeriod</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>tel if the function need to return a ponctual situation or on a period</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>dateStop</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>

                                    <td>
                                    </td>

                                    <td>
                                        <p>indicate the end date if a on period is true</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>monthlyReport</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                    <td>
                                        <p>indicate if the function need to return a monthly report used on charts</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>Object containing etp by category affected to a human ressource</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getHRVentilation"></a>
                    <span class="name">
                        <span ><b>getHRVentilation</b></span>
                        <a href="#getHRVentilation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getHRVentilation(hr: <a href="../interfaces/HumanResourceInterface.html" target="_self">HumanResourceInterface</a>, referentielId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, categories: <a href="../interfaces/HRCategoryInterface.html" target="_self">HRCategoryInterface[]</a>, date?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="435"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:435</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function used to get the positions (etp by category) of a human ressources at a specific date</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>hr</td>
                                    <td>
                                                <code><a href="../interfaces/HumanResourceInterface.html" target="_self" >HumanResourceInterface</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>human ressource object</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>referentielId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>contentieux ID</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>categories</td>
                                    <td>
                                                <code><a href="../interfaces/HRCategoryInterface.html" target="_self" >HRCategoryInterface[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>object of categories concerned</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>date</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>date of the ventilations returned</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </div>
                    <div class="io-description">
                        <p>return a list of categories with etp affected for a specific human ressource</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getHRVentilationOnPeriod"></a>
                    <span class="name">
                        <span ><b>getHRVentilationOnPeriod</b></span>
                        <a href="#getHRVentilationOnPeriod"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getHRVentilationOnPeriod(hr: <a href="../interfaces/HumanResourceInterface.html" target="_self">HumanResourceInterface</a>, referentielId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, categories: <a href="../interfaces/HRCategoryInterface.html" target="_self">HRCategoryInterface[]</a>, dateStart: Date | undefined, dateStop: Date | undefined)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="478"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:478</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function used to get the positions (etp by category) of a human ressources during a period</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>hr</td>
                                    <td>
                                                <code><a href="../interfaces/HumanResourceInterface.html" target="_self" >HumanResourceInterface</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>human ressource object</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>referentielId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>contentieux ID</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>categories</td>
                                    <td>
                                                <code><a href="../interfaces/HRCategoryInterface.html" target="_self" >HRCategoryInterface[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>object of categories concerned</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>dateStart</td>
                                    <td>
                                            <code>Date | undefined</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                                <tr>
                                    <td>dateStop</td>
                                    <td>
                                            <code>Date | undefined</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>end date of the ventilations returned</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/functions.html#month" target="_self" >{ etptAll: any; monthlyList: { [x: string]: any; }; }</a></code>

                    </div>
                    <div class="io-description">
                        <p>return a list of categories with etp affected for a specific human ressource</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getLabelTranslation"></a>
                    <span class="name">
                        <span ><b>getLabelTranslation</b></span>
                        <a href="#getLabelTranslation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getLabelTranslation(value: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="170"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:170</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get the label of a field and return the full text name of the label</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>value</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>label name</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>text value of the designated label</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSituation"></a>
                    <span class="name">
                        <span ><b>getSituation</b></span>
                        <a href="#getSituation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSituation(referentielId: number | null, dateStart?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>, dateStop?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="114"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:114</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get situation data (current, at start date or at end date/projected depending on parameters passed)</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>referentielId</td>
                                    <td>
                                            <code>number | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>contentieux ID</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>dateStart</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>optional start date of the situation</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>dateStop</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                        <p>optional end date of the situation</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>Situation data interface</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="range"></a>
                    <span class="name">
                        <span ><b>range</b></span>
                        <a href="#range"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>range(start: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, end: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, length: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, offset?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="261"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:261</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function to compute steps between a start and stop value</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>start</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>end</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>length</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>offset</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>Array of values between start and end value using a defined step</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toSimulate"></a>
                    <span class="name">
                        <span ><b>toSimulate</b></span>
                        <a href="#toSimulate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>toSimulate(params: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, simulation: <a href="../interfaces/SimulationInterface.html" target="_self">SimulationInterface</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="147"
                            class="link-to-prism">src/app/services/simulator/simulator.service.ts:147</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Function used to compute the simulated situation</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>params</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>containing the object parameters used to compute the simulation</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>simulation</td>
                                    <td>
                                                <code><a href="../interfaces/SimulationInterface.html" target="_self" >SimulationInterface</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>empty situation object to be filled</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="chartAnnotationBox"></a>
                    <span class="name">
                        <span ><b>chartAnnotationBox</b></span>
                        <a href="#chartAnnotationBox"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/ChartAnnotationBoxInterface.html" target="_self" >BehaviorSubject&lt;ChartAnnotationBoxInterface&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;ChartAnnotationBoxInterface&gt;({
      display: false,
      xMin: null,
      xMax: null,
      content: undefined,
    })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/services/simulator/simulator.service.ts:48</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="contentieuOrSubContentieuId"></a>
                    <span class="name">
                        <span ><b>contentieuOrSubContentieuId</b></span>
                        <a href="#contentieuOrSubContentieuId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;number | null&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;number | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/app/services/simulator/simulator.service.ts:38</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dateStart"></a>
                    <span class="name">
                        <span ><b>dateStart</b></span>
                        <a href="#dateStart"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;Date&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Date&gt;(start)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/services/simulator/simulator.service.ts:40</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dateStop"></a>
                    <span class="name">
                        <span ><b>dateStop</b></span>
                        <a href="#dateStop"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;Date&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;Date&gt;(end)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/services/simulator/simulator.service.ts:41</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="endCurrentSituation"></a>
                    <span class="name">
                        <span ><b>endCurrentSituation</b></span>
                        <a href="#endCurrentSituation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>month(new Date(), -1, &#x27;lastday&#x27;)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/services/simulator/simulator.service.ts:56</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isLoading"></a>
                    <span class="name">
                        <span ><b>isLoading</b></span>
                        <a href="#isLoading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;boolean&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;boolean&gt;(false)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/app/services/simulator/simulator.service.ts:31</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedCategory"></a>
                    <span class="name">
                        <span ><b>selectedCategory</b></span>
                        <a href="#selectedCategory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/HRCategoryInterface.html" target="_self" >BehaviorSubject&lt;HRCategoryInterface | null&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;HRCategoryInterface | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/app/services/simulator/simulator.service.ts:42</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedFonctionsIds"></a>
                    <span class="name">
                        <span ><b>selectedFonctionsIds</b></span>
                        <a href="#selectedFonctionsIds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>BehaviorSubject&lt;number[]&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;
    number[]
  &gt;([])</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/services/simulator/simulator.service.ts:44</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="situationActuelle"></a>
                    <span class="name">
                        <span ><b>situationActuelle</b></span>
                        <a href="#situationActuelle"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/SimulatorInterface.html" target="_self" >BehaviorSubject&lt;SimulatorInterface | null&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;SimulatorInterface | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/app/services/simulator/simulator.service.ts:32</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="situationProjected"></a>
                    <span class="name">
                        <span ><b>situationProjected</b></span>
                        <a href="#situationProjected"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/SimulatorInterface.html" target="_self" >BehaviorSubject&lt;SimulatorInterface | null&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;SimulatorInterface | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/services/simulator/simulator.service.ts:34</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="situationSimulated"></a>
                    <span class="name">
                        <span ><b>situationSimulated</b></span>
                        <a href="#situationSimulated"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/SimulationInterface.html" target="_self" >BehaviorSubject&lt;SimulationInterface | null&gt;</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;SimulationInterface | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/app/services/simulator/simulator.service.ts:36</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="startCurrentSituation"></a>
                    <span class="name">
                        <span ><b>startCurrentSituation</b></span>
                        <a href="#startCurrentSituation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>month(new Date(), -12)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="55" class="link-to-prism">src/app/services/simulator/simulator.service.ts:55</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;
import { sortBy } from &#x27;lodash&#x27;
import { BehaviorSubject } from &#x27;rxjs&#x27;
import { SimulatorInterface } from &#x27;src/app/interfaces/simulator&#x27;
import { HRCategoryInterface } from &#x27;src/app/interfaces/hr-category&#x27;
import { HumanResourceInterface } from &#x27;src/app/interfaces/human-resource-interface&#x27;
import { MainClass } from &#x27;src/app/libs/main-class&#x27;
import {
  month,
  nbOfDays,
  workingDay,
  decimalToStringDate,
  getRangeOfMonthsAsObject,
  isFirstDayOfMonth,
  generalizeTimeZone,
} from &#x27;src/app/utils/dates&#x27;
import { fixDecimal } from &#x27;src/app/utils/numbers&#x27;
import { HumanResourceService } from &#x27;../human-resource/human-resource.service&#x27;
import { SimulationInterface } from &#x27;src/app/interfaces/simulation&#x27;
import * as _ from &#x27;lodash&#x27;
import { ChartAnnotationBoxInterface } from &#x27;src/app/interfaces/chart-annotation-box&#x27;
import { ServerService } from &#x27;../http-server/server.service&#x27;

const start &#x3D; new Date()
const end &#x3D; new Date()

@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class SimulatorService extends MainClass {
  isLoading: BehaviorSubject&lt;boolean&gt; &#x3D; new BehaviorSubject&lt;boolean&gt;(false)
  situationActuelle: BehaviorSubject&lt;SimulatorInterface | null&gt; &#x3D;
    new BehaviorSubject&lt;SimulatorInterface | null&gt;(null)
  situationProjected: BehaviorSubject&lt;SimulatorInterface | null&gt; &#x3D;
    new BehaviorSubject&lt;SimulatorInterface | null&gt;(null)
  situationSimulated: BehaviorSubject&lt;SimulationInterface | null&gt; &#x3D;
    new BehaviorSubject&lt;SimulationInterface | null&gt;(null)
  contentieuOrSubContentieuId: BehaviorSubject&lt;number | null&gt; &#x3D;
    new BehaviorSubject&lt;number | null&gt;(null)
  dateStart: BehaviorSubject&lt;Date&gt; &#x3D; new BehaviorSubject&lt;Date&gt;(start)
  dateStop: BehaviorSubject&lt;Date&gt; &#x3D; new BehaviorSubject&lt;Date&gt;(end)
  selectedCategory: BehaviorSubject&lt;HRCategoryInterface | null&gt; &#x3D;
    new BehaviorSubject&lt;HRCategoryInterface | null&gt;(null)
  selectedFonctionsIds: BehaviorSubject&lt;number[]&gt; &#x3D; new BehaviorSubject&lt;
    number[]
  &gt;([])

  chartAnnotationBox: BehaviorSubject&lt;ChartAnnotationBoxInterface&gt; &#x3D;
    new BehaviorSubject&lt;ChartAnnotationBoxInterface&gt;({
      display: false,
      xMin: null,
      xMax: null,
      content: undefined,
    })
  startCurrentSituation &#x3D; month(new Date(), -12)
  endCurrentSituation &#x3D; month(new Date(), -1, &#x27;lastday&#x27;)

  constructor(
    private serverService: ServerService,
    private humanResourceService: HumanResourceService
  ) {
    super()

    this.watch(this.chartAnnotationBox.subscribe(() &#x3D;&gt; {}))

    this.watch(
      this.contentieuOrSubContentieuId.subscribe(() &#x3D;&gt; {
        if (this.contentieuOrSubContentieuId.getValue() !&#x3D;&#x3D; null) {
          this.getSituation(this.contentieuOrSubContentieuId.getValue())
        }
      })
    )

    this.watch(
      this.selectedFonctionsIds.subscribe(() &#x3D;&gt; {
        if (this.contentieuOrSubContentieuId.getValue() !&#x3D;&#x3D; null) {
          this.getSituation(this.contentieuOrSubContentieuId.getValue())
        }
      })
    )

    this.watch(
      this.dateStart.subscribe(() &#x3D;&gt; {
        if (this.contentieuOrSubContentieuId.getValue() !&#x3D;&#x3D; null) {
          this.getSituation(
            this.contentieuOrSubContentieuId.getValue(),
            this.dateStart.getValue()
          )
        }
      })
    )

    this.watch(
      this.dateStop.subscribe(() &#x3D;&gt; {
        if (this.contentieuOrSubContentieuId.getValue() !&#x3D;&#x3D; null) {
          this.getSituation(
            this.contentieuOrSubContentieuId.getValue(),
            this.dateStart.getValue(),
            this.dateStop.getValue()
          )
        }
      })
    )
  }

  /**
   * Get situation data (current, at start date or at end date/projected depending on parameters passed)
   * @param {number | null} referentielId contentieux ID
   * @param {Date} dateStart optional start date of the situation
   * @param {Date} dateStop optional end date of the situation
   *
   * @returns Situation data interface
   */
  getSituation(
    referentielId: number | null,
    dateStart?: Date,
    dateStop?: Date
  ) {
    console.log(&#x27;getSituation&#x27;)

    console.log(&#x27;Fonctions selected&#x27;, this.selectedFonctionsIds.getValue())
    this.isLoading.next(true)
    return this.serverService
      .post(&#x60;simulator/get-situation&#x60;, {
        backupId: this.humanResourceService.backupId.getValue(),
        referentielId: referentielId,
        dateStart: generalizeTimeZone(dateStart),
        dateStop: generalizeTimeZone(dateStop),
        functionIds: this.selectedFonctionsIds.getValue(),
        categoryId: this.selectedCategory.getValue()?.id,
      })
      .then((data) &#x3D;&gt; {
        if (dateStop) {
          this.situationProjected.next(data.data.situation.endSituation)
        } else this.situationActuelle.next(data.data.situation)

        console.log(&#x27;Situation result&#x27;, data)
      })
      .then(() &#x3D;&gt; this.isLoading.next(false))
  }

  /**
   * Function used to compute the simulated situation
   * @param params containing the object parameters used to compute the simulation
   * @param simulation empty situation object to be filled
   */
  toSimulate(params: any, simulation: SimulationInterface) {
    this.isLoading.next(true)
    this.serverService
      .post(&#x60;simulator/to-simulate&#x60;, {
        backupId: this.humanResourceService.backupId.getValue(),
        params: params,
        simulation: simulation,
        dateStart: generalizeTimeZone(this.dateStart.getValue()),
        dateStop: generalizeTimeZone(this.dateStop.getValue()),
        selectedCategoryId: this.selectedCategory.getValue()?.id,
      })
      .then((data) &#x3D;&gt; {
        console.log(&#x27;Simulation result&#x27;, data.data)
        this.situationSimulated.next(data.data)
        this.isLoading.next(false)
      })
  }

  /**
   * Get the label of a field and return the full text name of the label
   * @param value label name
   * @returns text value of the designated label
   */
  getLabelTranslation(value: string): string {
    switch (value) {
      case &#x27;etpMag&#x27;:
        return &#x27;ETPT magistrat&#x27;
      case &#x27;etpFon&#x27;:
        return &#x27;ETPT greffe&#x27;
      case &#x27;totalIn&#x27;:
        return &#x27;entres mensuelles&#x27;
      case &#x27;totalOut&#x27;:
        return &#x27;sorties mensuelles&#x27;
      case &#x27;lastStock&#x27;:
        return &#x27;stock&#x27;
      case &#x27;realDTESInMonths&#x27;:
        return &#x27;DTES&#x27;
      case &#x27;realCoverage&#x27;:
        return &#x27;taux de couverture&#x27;
      case &#x27;magRealTimePerCase&#x27;:
        return &#x27;temps moyen par dossier&#x27;
    }
    return &#x27;&#x27;
  }

  /**
   * Get the value of the displayed field
   * @param param label name
   * @param data simulated situation data object
   * @param initialValue specified if initialValue need to be converted or not in case of % or month
   * @param toCompute specified if the value returned is used afterwards to compute something, then let the value in decimal without unit
   * @returns label value as string or float
   */
  getFieldValue(
    param: string,
    data: SimulatorInterface | SimulationInterface | null,
    initialValue &#x3D; false,
    toCompute &#x3D; false
  ): any {
    switch (param) {
      case &#x27;etpMag&#x27;:
        return data?.etpMag || &#x27;0&#x27;
      case &#x27;totalOut&#x27;: {
        if (data?.totalOut &amp;&amp; data?.totalOut &gt;&#x3D; 0) {
          return data?.totalOut
        } else return &#x27;0&#x27;
      }
      case &#x27;totalIn&#x27;: {
        if (data?.totalIn &amp;&amp; data?.totalIn &gt;&#x3D; 0) {
          return data?.totalIn
        } else return &#x27;0&#x27;
      }
      case &#x27;lastStock&#x27;: {
        if (data?.lastStock &amp;&amp; data?.lastStock &gt;&#x3D; 0) {
          return data?.lastStock
        } else return &#x27;0&#x27;
      }
      case &#x27;etpCont&#x27;:
        return data?.etpCont || &#x27;0&#x27;
      case &#x27;etpFon&#x27;:
        return data?.etpFon || &#x27;0&#x27;
      case &#x27;realCoverage&#x27;: {
        if (data?.realCoverage &amp;&amp; toCompute &#x3D;&#x3D;&#x3D; true) {
          return Math.round(data?.realCoverage) || &#x27;0&#x27;
        } else if (data?.realCoverage &amp;&amp; initialValue &#x3D;&#x3D;&#x3D; true)
          return Math.round(data?.realCoverage) + &#x27;%&#x27; || &#x27;0&#x27;
        else if (data?.realCoverage)
          return Math.round(data?.realCoverage * 100) + &#x27;%&#x27; || &#x27;0&#x27;
        else return &#x27;0&#x27;
      }
      case &#x27;realDTESInMonths&#x27;:
        if (data?.realDTESInMonths &amp;&amp; data?.realDTESInMonths !&#x3D;&#x3D; Infinity) {
          if (data?.realDTESInMonths &lt;&#x3D; 0) {
            return &#x27;0&#x27;
          } else return data?.realDTESInMonths + &#x27; mois&#x27; || &#x27;0&#x27;
        }
        return &#x27;0&#x27;
      case &#x27;magRealTimePerCase&#x27;:
        if (initialValue) return data?.magRealTimePerCase || &#x27;0&#x27;
        else {
          return decimalToStringDate(data?.magRealTimePerCase) || &#x27;0&#x27;
        }
    }
    return &#x27;&#x27;
  }

  /**
   * Function to compute steps between a start and stop value
   * @param start
   * @param end
   * @param length
   * @param offset
   * @returns Array of values between start and end value using a defined step
   */
  range(start: number, end: number, length: number, offset?: number) {
    const step &#x3D; (end - start) / (length - 1)
    return Array(length)
      .fill(0)
      .map((_, index) &#x3D;&gt; {
        if (index &#x3D;&#x3D;&#x3D; 0) return start
        else if (index &#x3D;&#x3D;&#x3D; length) return end
        else return start + step * index
      })
  }

  /**
   * Function used to generate a dataset using linear function
   * @param value1 start value
   * @param value2 end value
   * @param step number of step between values
   * @returns return a LinearDataset
   */
  generateLinearData(value1: number, value2: number, step: number) {
    if (value1 &lt; 0) value1 &#x3D; 0
    if (value2 &lt; 0) value2 &#x3D; 0

    let v &#x3D; null
    if (step &#x3D;&#x3D;&#x3D; 1 || step &#x3D;&#x3D;&#x3D; 2) {
      v &#x3D; [value1, value2]
    } else if (step &#x3D;&#x3D;&#x3D; 3) {
      v &#x3D; [value1, (value1 + value2) / 2, value2]
    } else if (value1 &#x3D;&#x3D;&#x3D; value2) {
      return Array(step).fill(value1)
    } else {
      v &#x3D; this.range(value1, value2, step)
    }

    return v
  }

  /**
   * Function used to get an Array of identical values
   * @param value1
   * @param size lenght of the array
   * @returns Array of values
   */
  generateData(value1: number, size: number) {
    if (value1 &lt; 0) value1 &#x3D; 0
    return Array(size).fill(value1)
  }

  /**
   * Function used to get the formated positions (etp by category) of a human ressources
   * @param hr human ressource object
   * @param referentiel contentieux object
   * @param categories categories concerned
   * @param date date of the position
   * @param onPeriod tel if the function need to return a ponctual situation or on a period
   * @param dateStop indicate the end date if a on period is true
   * @param monthlyReport indicate if the function need to return a monthly report used on charts
   * @returns Object containing etp by category affected to a human ressource
   */
  getHRPositions(
    hr: HumanResourceInterface[],
    referentiel: number,
    categories: any,
    date?: Date,
    onPeriod?: boolean,
    dateStop?: Date,
    monthlyReport &#x3D; false
  ) {
    const hrCategories: any &#x3D; {}
    let hrCategoriesMonthly: { [key: string]: any } &#x3D; new Object({})
    let emptyList: { [key: string]: any } &#x3D; new Object({})
    emptyList &#x3D; { ...getRangeOfMonthsAsObject(date!, dateStop!, true) }

    Object.keys(emptyList).map((x: any) &#x3D;&gt; {
      emptyList[x] &#x3D; {
        ...{
          etpt: 0,
        },
      }
    })

    categories.map((c: any) &#x3D;&gt; {
      hrCategories[c.label] &#x3D; hrCategories[c.label] || {
        totalEtp: 0,
        list: [],
        rank: c.rank,
      }

      hrCategoriesMonthly[c.label] &#x3D; {
        ...JSON.parse(JSON.stringify(emptyList)),
      }
    })

    for (let i &#x3D; 0; i &lt; hr.length; i++) {
      let etptAll,
        monthlyList: any &#x3D; null
      if (onPeriod &#x3D;&#x3D;&#x3D; true) {
        ;({ etptAll, monthlyList } &#x3D; {
          ...this.getHRVentilationOnPeriod(
            hr[i],
            referentiel,
            categories,
            date instanceof Date ? date : undefined,
            dateStop instanceof Date ? dateStop : undefined
          ),
        })
      } else
        etptAll &#x3D; this.getHRVentilation(hr[i], referentiel, categories, date)

      Object.values(etptAll).map((c: any) &#x3D;&gt; {
        if (c.etpt) {
          hrCategories[c.label].list.push(hr[i])
          hrCategories[c.label].totalEtp +&#x3D; c.etpt
        }

        if (onPeriod &#x3D;&#x3D;&#x3D; true &amp;&amp; dateStop) {
          Object.keys(monthlyList).map((month: any) &#x3D;&gt; {
            if (c.label &#x3D;&#x3D;&#x3D; monthlyList[month][c.id].name)
              hrCategoriesMonthly[c.label][month].etpt +&#x3D;
                monthlyList[month][c.id].etpt
          })
        }
      })
    }

    const list &#x3D; []
    const listMonthly &#x3D; []
    for (const [key, value] of Object.entries(hrCategories)) {
      list.push({
        name: key,
        // @ts-ignore
        totalEtp: fixDecimal(value.totalEtp || 0),
        // @ts-ignore
        rank: value.rank,
      })

      let tmpObj: any &#x3D; []

      Object.keys(hrCategoriesMonthly[key]).map((x) &#x3D;&gt; {
        hrCategoriesMonthly[key][x].etpt &#x3D; fixDecimal(
          hrCategoriesMonthly[key][x].etpt || 0
        )

        tmpObj.push({
          ...{
            name: x,
            // @ts-ignore
            etpt: fixDecimal(hrCategoriesMonthly[key][x].etpt || 0),
          },
        })
      })

      listMonthly.push({
        name: key,
        // @ts-ignore
        values: { ...tmpObj },
      })
    }

    if (monthlyReport) {
      return {
        fururEtpAffectedToCompute: sortBy(list, &#x27;rank&#x27;),
        monthlyReport: listMonthly,
      }
    } else return sortBy(list, &#x27;rank&#x27;)
  }

  /**
   * Function used to get the positions (etp by category) of a human ressources at a specific date
   * @param hr human ressource object
   * @param referentielId contentieux ID
   * @param categories object of categories concerned
   * @param date date of the ventilations returned
   * @returns return a list of categories with etp affected for a specific human ressource
   */
  getHRVentilation(
    hr: HumanResourceInterface,
    referentielId: number,
    categories: HRCategoryInterface[],
    date?: Date
  ): number {
    const list: any &#x3D; {}
    categories.map((c) &#x3D;&gt; {
      list[c.id] &#x3D; {
        etpt: 0,
        ...c,
      }
    })

    const now &#x3D; date ? date : new Date()
    const { etp, situation } &#x3D; this.humanResourceService.getEtpByDateAndPerson(
      referentielId,
      now,
      hr
    )

    if (etp !&#x3D;&#x3D; null) {
      // @ts-ignore
      list[situation.category.id].etpt +&#x3D; etp
    }

    // format render
    for (const property in list) {
      list[property].etpt &#x3D; list[property].etpt / 1
    }

    return list
  }

  /**
   * Function used to get the positions (etp by category) of a human ressources during a period
   * @param hr human ressource object
   * @param referentielId contentieux ID
   * @param categories object of categories concerned
   * @param date start date of the ventilations returned
   * @param dateStop end date of the ventilations returned
   * @returns return a list of categories with etp affected for a specific human ressource
   */
  getHRVentilationOnPeriod(
    hr: HumanResourceInterface,
    referentielId: number,
    categories: HRCategoryInterface[],
    dateStart: Date | undefined,
    dateStop: Date | undefined
  ) {
    const list: any &#x3D; {}

    let monthlyList: { [key: string]: any } &#x3D; {
      ...getRangeOfMonthsAsObject(dateStart!, dateStop!, true),
    }

    categories.map((c) &#x3D;&gt; {
      list[c.id] &#x3D; {
        etpt: 0,
        ...c,
      }
      Object.keys(monthlyList).map((x: any) &#x3D;&gt; {
        monthlyList[x][c.id] &#x3D; {
          name: c.label,
          etpt: 0,
          nbOfDays: 0,
        }
      })
    })

    const now &#x3D; dateStart instanceof Date ? new Date(dateStart) : new Date()
    const stop &#x3D; dateStop instanceof Date ? new Date(dateStop) : new Date()

    let nbDay &#x3D; 0
    let monthDaysCounter &#x3D; 0
    do {
      if (isFirstDayOfMonth(now)) monthDaysCounter &#x3D; 0

      if (workingDay(now)) {
        // only working day
        nbDay++
        monthDaysCounter++
        const { etp, situation } &#x3D;
          this.humanResourceService.getEtpByDateAndPerson(
            referentielId,
            now,
            hr
          )

        if (
          etp !&#x3D;&#x3D; null &amp;&amp;
          situation &amp;&amp;
          situation.category &amp;&amp;
          list[situation.category.id]
        ) {
          list[situation.category.id].etpt +&#x3D; etp

          const str &#x3D;
            this.getShortMonthString(now) +
            now.getFullYear().toString().slice(-2)

          monthlyList[str][situation.category.id].etpt +&#x3D; etp
          monthlyList[str][situation.category.id].nbOfDays &#x3D; monthDaysCounter
        }
      }
      now.setDate(now.getDate() + 1)
    } while (now.getTime() &lt;&#x3D; stop.getTime())

    // format render
    for (const property in list) {
      list[property].etpt &#x3D; list[property].etpt / nbDay
      Object.keys(monthlyList).map((x: any) &#x3D;&gt; {
        if (monthlyList[x][property].nbOfDays !&#x3D;&#x3D; 0)
          monthlyList[x][property].etpt &#x3D;
            monthlyList[x][property].etpt / monthlyList[x][property].nbOfDays
      })
    }

    return { etptAll: list, monthlyList: { ...monthlyList } }
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'SimulatorService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>

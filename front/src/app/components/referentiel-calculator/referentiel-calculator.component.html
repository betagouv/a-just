<div *ngIf="referentiel">
  <div class="datas">
    <h3>{{ referentiel.parent ? referentiel.parent.label + ' - ' : '' }} {{ referentiel.label }}</h3>
    <p>Du {{ dateStart | date: "dd" }}
      {{ getShortMonthString(dateStart) }}
      {{ dateStart.getFullYear() }} au {{ dateStop | date: "dd" }}
      {{ getShortMonthString(dateStop) }}
      {{ dateStop.getFullYear() }}</p>
    <p>Entrées mensuelles moyennes : {{ totalIn }}</p>
    <p>Sorties mensuelles moyennes : {{ totalOut }}</p>
    <p>Stock de fin de période : {{ totalStock }}</p>
    <p>ETP T moyens affectés :
      <ng-template ngFor let-etp [ngForOf]="etpAffected">
        <br /> - {{etp.totalEtp}} {{etp.totalEtp > 1 ? etp.name+'s' : etp.name}}
      </ng-template>
    </p>
  </div>

  <div class="calcul">

    <div class="actual-activities">
      <p><b>Activité constatée</b></p>
      <p>Taux de couverture :</p>
      <aj-speedometer [percent]="(realCoverage || 0) * 100"></aj-speedometer>
      <p>DTES instantané : {{ realDTESInMonths }} mois</p>
      <p>Temps moyen par dossier observé : {{ realTimePerCase && realTimePerCase > 1 ? realTimePerCase + ' heures' :
        realTimePerCase + ' heure'
        }}</p>
    </div>

    <div class="calculate-activities">
      <p><b>Activité calculée</b></p>
      <p>Taux de couverture possible :</p>
      <aj-speedometer [percent]="(calculateCoverage || 0) * 100"></aj-speedometer>
      <p>Temps moyen par dossier renseigné : {{ calculateTimePerCase && calculateTimePerCase > 1 ? calculateTimePerCase
        + '
        heures' :
        calculateTimePerCase + ' heure'
        }}</p>
      <p>Sorties possibles : {{ calculateOut }}</p>
      <p>DTES calculé : {{ calculateDTESInMonths }} mois</p>
    </div>
  </div>
</div>
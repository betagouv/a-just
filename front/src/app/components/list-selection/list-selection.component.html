<div class="list-selection" (click)="$event.stopPropagation(); onToggleDropdown()">
    <ng-template [ngIf]="title">
        <div *ngIf="icon" class="title-icon"><i class="ri-{{icon}}"></i></div>
        <p class="title-list">{{ title }}</p>
        <div class="value-selected stretched">
            <ng-template [ngIf]="multiple">
                <p class="ellipis">{{ labelPreview }}</p>
            </ng-template>
            <ng-template [ngIf]="!multiple">
                <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: itemsSelected }"></ng-container>
            </ng-template>
        </div>
    </ng-template>
    <ng-template [ngIf]="!title">
        <div class="value-selected normal">
            <ng-template [ngIf]="multiple">
                <p>{{ labelPreview }}</p>
            </ng-template>
            <ng-template [ngIf]="!multiple">
                <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: itemsSelected }"></ng-container>
            </ng-template>
        </div>
    </ng-template>
    <mat-icon class="arrow-list">expand_more</mat-icon>
</div>

<div class="select-area" #selectArea [ngClass]="{right: title}"
    [ngStyle]="{'max-height': maxHeightDropdown ? maxHeightDropdown+'px' : null}" *ngIf="onOpenDropdown">
    <ng-template [ngIf]="!multiple">
        <div *ngFor="let item of list" [ngClass]="{selected: item.id === value }"
            (click)="$event.stopPropagation(); onSelect(item.id)">
            <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: [item] }"></ng-container>
        </div>
    </ng-template>
    <ng-template [ngIf]="multiple">
        <div *ngFor="let item of list" [ngClass]="{selected: values.indexOf(item.id) !== -1}"
            (click)="$event.stopPropagation(); onSelectMultiple(item.id)">

            <i *ngIf="values.indexOf(item.id) !== -1" class="ri-checkbox-line"></i>
            <i *ngIf="values.indexOf(item.id) === -1" class="ri-checkbox-blank-line"></i>

            <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: [item] }"></ng-container>
        </div>
    </ng-template>
</div>

<ng-template #itemTemplate let-items>
    <div *ngFor="let item of items">
        <i *ngIf="item.icon" class="ri-{{item.icon}}"></i>
        <p *ngIf="item.label">{{item.label}}</p>
    </div>
</ng-template>
<aj-wrapper-no-connected
  [title]="'Un outil d\'aide à la décision et<br/>de prospective pour piloter<br/>votre juridiction'"
>
  <div class="logo">
    <img
      src="/assets/icons/bloc-marque/bloc-marque-white@2x.svg"
      alt="ministère de la justice"
    />
    <img src="/assets/icons/logos/white-192x192@1x.svg" alt="a-just" />
  </div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h3>Embarquement A-JUST</h3>
    <ng-template [ngIf]="ssoIsActivate && signUpStep === 1">
      <button
        class="outline white strict-border sso-bt"
        (click)="onUseSSO()"
        type="button"
        [ngClass]="{disabled: !canUseSSO}"
      >
        <img src="/assets/icons/bloc-marque/bloc-marque-white-light.svg" />
        Embarquer avec Pages Blanches
      </button>

      <div class="or"><p>ou</p></div>
    </ng-template>

    <div class="box-signup">
      <ng-template [ngIf]="!provider">
        <label class="steps">Étape {{signUpStep}} sur 2</label>
        <label class="sub-title"
          >Tous les champs de ce formulaire sont obligatoires</label
        ></ng-template
      >
      <p class="step-title">{{signUpStep===1 ?'Je suis :':'Ma fonction'}}</p>
      <div class="bordure-steps" *ngIf="!provider">
        <div class="step-one"></div>
        <div
          class="step-two"
          [ngStyle]="{ 'background-color': getStepColor()}"
        ></div>
      </div>
      <ng-template [ngIf]="signUpStep===1">
        <div class="grid-double">
          <div>
            <label>Prénom</label>
            <input
              class="ethics-ui"
              placeholder="Prénom"
              formControlName="firstName"
              type="text"
            />
          </div>
          <div>
            <label>NOM</label>
            <input
              class="ethics-ui"
              placeholder="Nom"
              formControlName="lastName"
              type="text"
            />
          </div>
        </div>
        <label>Courriel professionnel :</label>
        <label class="sub-label"
          >Adresse nominative uniquement, ne pas utiliser de boîte générique ou
          structurelle</label
        >
        <input
          class="ethics-ui"
          placeholder=""
          formControlName="email"
          type="email"
        />

        <ng-template [ngIf]="!paramsUrl?.provider">
          <div class="password-line">
            <div><label>Créer un mot de passe :</label></div>
            <div>
              <span
                ><input type="checkbox" formControlName="checkboxPassword" />
                Afficher</span
              >
            </div>
          </div>
          <input
            class="ethics-ui no-margin"
            placeholder=""
            formControlName="password"
            type="{{!form.controls['checkboxPassword'].value?'password':'text'}}"
            (keyup)="checkStrength($event)"
          />
          <label class="sub-title no-margin"
            >Votre mot de passe doit contenir au moins :</label
          >
          <label
            class="sub-label password"
            [ngStyle]="{ 'color': getParamColor(0)}"
            ><span [ngStyle]="{ 'background-color': getParamColor(0)}">i</span>
            &nbsp; 8 caractères minimum</label
          >
          <label
            class="sub-label password"
            [ngStyle]="{ 'color': getParamColor(1)}"
            ><span [ngStyle]="{ 'background-color': getParamColor(1)}">i</span>
            &nbsp; 1 caractère spécial</label
          >
          <label
            class="sub-label password"
            [ngStyle]="{ 'color': getParamColor(2)}"
            ><span [ngStyle]="{ 'background-color': getParamColor(2)}">i</span>
            &nbsp; 1 chiffre minimum</label
          >
          <label
            class="sub-label password last"
            [ngStyle]="{ 'color': getParamColor(3)}"
            ><span [ngStyle]="{ 'background-color': getParamColor(3)}">i</span>
            &nbsp; 1 majuscule</label
          >

          <label>Confirmation de votre mot de passe :</label>
          <input
            class="ethics-ui"
            placeholder=""
            formControlName="passwordConf"
            type="password"
          />
        </ng-template>

        <div class="checkbox-container checkbox-row">
          <input
            class="large"
            type="checkbox"
            formControlName="checkbox"
            #checkbox
          />
          <p (click)="checkbox.click()">
            Je certifie avoir lu et accepté les
            <a [routerLink]="['/conditions-generales-d-utilisation', 'signUp']"
              >Conditions générales d'utilisation</a
            >.
          </p>
        </div>

        <div class="next-step" (click)="onStepTwo()">
          <p>Continuer mon embarquement</p>
        </div>
      </ng-template>
      <ng-template [ngIf]="signUpStep===2">
        <label>Mon tribunal de rattachement :</label>
        <div class="tj">
          <select (change)="setTj($event.target)">
            <!--<option selected hidden></option>-->
            <option selected hidden>Choisir un TJ</option>
            <option *ngFor="let tj of tjs" [value]="tj.id">
              {{ tj.label }}
            </option>
          </select>
        </div>

        <label>Ma fonction :</label>
        <select #fctSelect (change)="setFonc($event.target)">
          <option selected hidden>Choisir une fonction</option>
          <option *ngFor="let fonc of fonctions" [value]="fonc">
            {{ fonc }}
          </option>
          <option>Autre</option>
        </select>

        <ng-container *ngIf="fctSelect.value==='Autre'">
          <label>Intitulé de ma fonction :</label>
          <input
            class="ethics-ui"
            placeholder="Exemple"
            formControlName="fonctionAutre"
            type="text"
          />

          <label>Mon responsable hiérarchique :</label>
          <label class="sub-label"
            >Personne qui validera l'ouverture de mes droits</label
          >
          <input
            class="ethics-ui"
            placeholder="prénom nom et fonction"
            formControlName="responsable"
            type="text"
          />
        </ng-container>

        <div>
          <input
            type="submit"
            class="big-button"
            value="Valider mon embarquement"
          />
        </div>
      </ng-template>
    </div>

    <div class="login">
      <p><b>Vous avez déjà un compte</b></p>
      <a routerLink="/connexion"
        ><button class="outline white strict-border">
          <i class="ri-login-box-line"></i>Se connecter
        </button></a
      >
    </div>
  </form>
</aj-wrapper-no-connected>

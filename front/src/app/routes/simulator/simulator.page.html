<aj-wrapper title="Simulateur" [actionTemplate]="actions" [alignLeft]="true">
  <div class="top-bar-container">
    <p>Période choisie :</p>

    <div class="container-timeline">
      <div class="container-timeline-button">
        <aj-date-select-blue
          class="select-disabled {{mooveClass}} {{disabled}}"
          [value]="dateStart"
          (valueChange)="updateReferentielSelected('dateStart', $event)"
          [max]="dateStop"
          [min]="today"
        >
        </aj-date-select-blue>
        <div class="space"></div>
        <aj-date-select-blue
          class="{{disabled}}"
          [title]="'Fin de période'"
          [value]="dateStop"
          (valueChange)="updateReferentielSelected('dateStop', $event)"
          [min]="getMin()"
          [side]="'right'"
        >
        </aj-date-select-blue>
      </div>
      <div class="Rectangle">
        <div class="dot {{mooveClass}}"></div>
        <div class="blue-line {{mooveClass}}">
          <div
            *ngFor="let d of nbOfMonthWithinPeriod"
            class="dot-generated-container"
          >
            <div class="dot-generated"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="items before-after">
    <div class="item blue-bg">
      <p>Entrées mensuelles</p>
    </div>
    <div class="item">
      <p>Sorties mensuelles</p>
    </div>
    <div class="item blue-bg">
      <p>Stock</p>
    </div>
    <div class="item">
      <p>ETPT magistrat</p>
    </div>
    <div class="item blue-bg">
      <p>ETPT greffe</p>
    </div>
    <div class="item">
      <p>ETPT contractuels</p>
    </div>
    <div class="item blue-bg">
      <p>Taux de couverture</p>
    </div>
    <div class="item">
      <p>DTES</p>
    </div>
    <div class="item blue-bg">
      <p>Temps moyen / dossier</p>
    </div>
  </div>
  <div
    class="actual-situation"
    *ngIf="subList.length!==0 || this.getElementById(this.contentieuId)?.childrens?.length===0"
    [@fadeInOut]
  >
    <div class="line-title">
      <p>
        Situation{{startRealValue? ' au':''}}<br />
        {{startRealValue || "à aujourd'hui"}}
      </p>
    </div>

    <div class="line-item orange-bg">
      <input [value]="getFieldValue('totalIn',firstSituationData)" disabled />
    </div>
    <div class="line-item">
      <input [value]="getFieldValue('totalOut',firstSituationData)" disabled />
    </div>
    <div class="line-item orange-bg">
      <input [value]="getFieldValue('lastStock',firstSituationData)" disabled />
    </div>
    <div class="line-item">
      <input [value]="getFieldValue('etpMag',firstSituationData)" disabled />
    </div>
    <div class="line-item orange-bg">
      <input
        [value]="getFieldValue('ETPTGreffe',firstSituationData)"
        disabled
      />
    </div>
    <div class="line-item">
      <input [value]="getFieldValue('etpFon',firstSituationData)" disabled />
    </div>
    <div class="line-item orange-bg">
      <input
        [value]="getFieldValue('realCoverage',firstSituationData)"
        disabled
      />
    </div>
    <div class="line-item">
      <input
        [value]="getFieldValue('realDTESInMonths',firstSituationData)"
        disabled
      />
    </div>
    <div class="line-item orange-bg">
      <input
        [value]="getFieldValue('realTimePerCase',firstSituationData)"
        disabled
      />
    </div>
  </div>

  <div class="actual-situation color-blue" *ngIf="dateStop!==null" [@fadeInOut]>
    <div class="line-title">
      <p>
        Situation projetée<br />
        au {{stopRealValue}}
      </p>
    </div>

    <div class="line-item grey-bg">
      <input
        [value]="getFieldValue('totalIn',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item">
      <input
        [value]="getFieldValue('totalOut',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item grey-bg">
      <input
        [value]="getFieldValue('lastStock',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item">
      <input
        [value]="getFieldValue('etpMag',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item grey-bg">
      <input
        [value]="getFieldValue('ETPTGreffe',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item">
      <input
        [value]="getFieldValue('etpFon',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item grey-bg">
      <input
        [value]="getFieldValue('realCoverage',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item">
      <input
        [value]="getFieldValue('realDTESInMonths',projectedSituationData)"
        disabled
      />
    </div>
    <div class="line-item grey-bg">
      <input
        [value]="getFieldValue('realTimePerCase',projectedSituationData)"
        disabled
      />
    </div>
  </div>
  <div
    class="actual-situation color-white"
    *ngIf="dateStop!==null"
    [@fadeInOut]
  >
    <div class="options">
      <div
        id="init-button"
        class="init-button"
        (click)="initParams([totalIn, totalOut, lastStock, etpMag, realCoverage, realDTESInMonths, realTimePerCase])"
      >
        <p class="title">Réinitialiser</p>
      </div>
      <div
        class="simulate-button {{simulateButton}}"
        (click)="simulate([totalIn, totalOut, lastStock, etpMag, realCoverage, realDTESInMonths, realTimePerCase])"
      >
        <p class="title">Simuler</p>
      </div>
    </div>
    <div class="line-title">
      <p>
        Modifier<br />
        des paramètres
      </p>
    </div>
    <aj-popup
      *ngIf="toSimulate===true"
      [closeIcon]="true"
      (onClose)="toSimulate = false"
      [removeShadow]="'noShadow'"
    >
      <div id="circle">
        <img src="/assets/icons/calculatrice.svg" />
      </div>
      <p>Je souhaite lancer la simulation...</p>
      <div class="choices">
        <div
          class="choice"
          (click)="selectParamToLock(0,[totalIn, totalOut, lastStock, etpMag, realCoverage, realDTESInMonths, realTimePerCase])"
        >
          à {{getLockedParamLabel(0)}}
          <br />constant{{getLockedParamLabel(0)!=='entrées
          mensuelles'&&getLockedParamLabel(0)!=='sorties mensuelles'?'':'es'}}
        </div>
        <div
          class="choice"
          (click)="selectParamToLock(1,[totalIn, totalOut, lastStock, etpMag, realCoverage, realDTESInMonths, realTimePerCase])"
        >
          à {{getLockedParamLabel(1)}}
          <br />constant{{getLockedParamLabel(1)!=='entrées
          mensuelles'&&getLockedParamLabel(1)!=='sorties mensuelles'?'':'es'}}
        </div>
      </div>
    </aj-popup>

    <aj-popup
      *ngIf="openPopup===true"
      [actions]="[
    { id: 'modify', content: 'Ajuster', fill: true }
  ]"
      [closeIcon]="true"
      (onClose)="openPopup = false"
      [removeShadow]="'noShadow'"
      (keypress)="onKeypressEvent($event,volume.value,buttonSelected,[totalIn, totalOut, lastStock, etpMag, realCoverage,realDTESInMonths,realTimePerCase])"
      (selectedAction)="setParamsToAjust(volume.value,buttonSelected,[totalIn, totalOut, lastStock, etpMag, realCoverage,realDTESInMonths,realTimePerCase])"
    >
      <div id="circle">
        <img src="/assets/icons/stock.svg" />
      </div>
      <p>Ajustement {{getText('title')}}</p>

      <div class="rectangle">
        <div
          class="title"
          *ngIf="buttonSelected.id !== 'etpMag' && buttonSelected.id !== 'totalOut' && buttonSelected.id !== 'totalIn'&& buttonSelected.id !== 'realTimePerCase'"
        >
          Atteindre au {{stopRealValue}} <br />
          {{getText('firstInput')}} :
        </div>
        <div
          class="title"
          *ngIf="buttonSelected.id === 'etpMag' || buttonSelected.id === 'totalOut'|| buttonSelected.id === 'totalIn'|| buttonSelected.id === 'realTimePerCase'"
        >
          Appliquer sur la période {{startRealValue? "du":"d'"}}
          {{startRealValue||"aujourd'hui"}} au {{stopRealValue}}
          {{buttonSelected.id==='etpMag' ? "un volume moyen d'ETPT magistrat":
          buttonSelected.id === 'totalOut'?"un volume moyen de sorties
          mensuelles": buttonSelected.id === 'totalIn'? "un volume moyen
          d'entrées mensuelles":"un temps moyen par dossier"}} de :
        </div>
        <input
          [class.displayNone]="buttonSelected.id === 'realTimePerCase'"
          type="number"
          (oninput)="onUpdateValueToAjust($event)"
          (focusin)="resetPercentage = true"
          (focusout)="resetPercentage = false"
          value="{{valueSaved(1)}}"
          #volume
        />
        <app-time-selector
          *ngIf="buttonSelected.id === 'realTimePerCase'"
          [value]="parseFloat(valueSaved(1))"
          (valueChange)="valueChange(volume,$event)"
        ></app-time-selector>
      </div>
      <div class="rectangle" *ngIf="getNbOfParams()===2">
        <div class="title">
          Définir {{getText('secondInput')}} :<br />
          <span
            >(en % par rapport à la situation {{startRealValue? 'au' : "d'"}}
            {{startRealValue||"aujourd'hui"}})</span
          >
        </div>
        <aj-input-percentage
          (focusin)="volume.value = ''"
          [referenceValue]="getReferenceValue(getFieldValue(buttonSelected.id,firstSituationData))"
          [reset]="resetPercentage"
          [defaultValue]="valueSaved(2)"
          (valueChange)="onUpdateValueToAjust($event)"
        ></aj-input-percentage>
      </div>
    </aj-popup>
    <div class="line-item blue-bg">
      <input
        class="ajusted-button"
        id="totalIn"
        [class.filled]="totalIn.value!=='Ajuster'"
        (click)="openPopupWithParams(totalIn)"
        value="Ajuster"
        readonly="readonly"
        #totalIn
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===totalIn.id  || paramsToAjust.param2.label===totalIn.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(totalIn.id,getFieldValue('totalIn',firstSituationData))}}%

        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item">
      <input
        class="ajusted-button"
        id="totalOut"
        [class.filled]="totalOut.value!=='Ajuster'"
        (click)="openPopupWithParams(totalOut)"
        value="Ajuster"
        readonly="readonly"
        #totalOut
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===totalOut.id  || paramsToAjust.param2.label===totalOut.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(totalOut.id,getFieldValue('totalOut',firstSituationData))}}%
        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item blue-bg">
      <input
        class="ajusted-button"
        id="lastStock"
        [class.filled]="lastStock.value!=='Ajuster'"
        (click)="openPopupWithParams(lastStock)"
        value="Ajuster"
        readonly="readonly"
        #lastStock
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===lastStock.id  || paramsToAjust.param2.label===lastStock.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(lastStock.id,getFieldValue('lastStock',firstSituationData))}}%

        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item">
      <input
        class="ajusted-button"
        id="etpMag"
        [class.filled]="etpMag.value!=='Ajuster'"
        (click)="openPopupWithParams(etpMag)"
        value="Ajuster"
        readonly="readonly"
        #etpMag
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===etpMag.id  || paramsToAjust.param2.label===etpMag.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(etpMag.id,getFieldValue('etpMag',firstSituationData))}}%

        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item blue-bg">
      <input
        class="ajusted-button disable"
        id="ETPTGreffe"
        [class.filled]="ETPTGreffe.value!=='Ajuster'"
        (click)="openPopupWithParams(ETPTGreffe)"
        value="Ajuster"
        readonly="readonly"
        #ETPTGreffe
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===ETPTGreffe.id  || paramsToAjust.param2.label===ETPTGreffe.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(ETPTGreffe.id,getFieldValue('ETPTGreffe',firstSituationData))}}%
        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item">
      <input
        class="ajusted-button disable"
        id="etpFon"
        [class.filled]="etpFon.value!=='Ajuster'"
        (click)="openPopupWithParams(etpFon)"
        value="Ajuster"
        readonly="readonly"
        #etpFon
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===etpFon.id  || paramsToAjust.param2.label===etpFon.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(etpFon.id,getFieldValue('etpFon',firstSituationData))}}%

        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item blue-bg">
      <input
        class="ajusted-button"
        id="realCoverage"
        [class.filled]="realCoverage.value!=='Ajuster'"
        (click)="openPopupWithParams(realCoverage)"
        value="Ajuster"
        readonly="readonly"
        #realCoverage
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===realCoverage.id  || paramsToAjust.param2.label===realCoverage.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(realCoverage.id,getFieldValue('realCoverage',firstSituationData))}}pts
        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item">
      <input
        class="ajusted-button"
        id="realDTESInMonths"
        [class.filled]="realDTESInMonths.value!=='Ajuster'"
        (click)="openPopupWithParams(realDTESInMonths)"
        value="Ajuster"
        readonly="readonly"
        #realDTESInMonths
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===realDTESInMonths.id  || paramsToAjust.param2.label===realDTESInMonths.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(realDTESInMonths.id,getFieldValue('realDTESInMonths',firstSituationData))}}%

        <div class="triangle"></div>
      </div>
    </div>
    <div class="line-item blue-bg">
      <input
        class="ajusted-button"
        id="realTimePerCase"
        [class.filled]="realTimePerCase.value!=='Ajuster'"
        (click)="openPopupWithParams(realTimePerCase)"
        value="Ajuster"
        readonly="readonly"
        #realTimePerCase
      />
      <div
        class="modified-label"
        *ngIf="paramsToAjust.param1.label===realTimePerCase.id  || paramsToAjust.param2.label===realTimePerCase.id"
        [@fadeInOut]
      >
        {{percentageModifiedInputText(realTimePerCase.id,getFieldValue('realTimePerCase',firstSituationData,true))}}%

        <div class="triangle"></div>
      </div>
    </div>
  </div>

  <div class="simulation-bottom" *ngIf="toDisplaySimulation">
    <p class="simulation-title">Résultat de la simulation</p>
    <div class="simulation-table">
      <div class="items">
        <div class="item blue-bg">
          <p>Entrées mensuelles</p>
        </div>
        <div class="item">
          <p>Sorties mensuelles</p>
        </div>
        <div class="item blue-bg">
          <p>Stock</p>
        </div>
        <div class="item">
          <p>ETPT magistrat</p>
        </div>
        <div class="item blue-bg">
          <p>ETPT greffe</p>
        </div>
        <div class="item">
          <p>ETPT contractuels</p>
        </div>
        <div class="item blue-bg">
          <p>Taux de couverture</p>
        </div>
        <div class="item">
          <p>DTES</p>
        </div>
        <div class="item blue-bg">
          <p>Temps moyen / dossier</p>
        </div>
      </div>
    </div>

    <div
      class="simulation-situation"
      *ngIf="subList.length!==0 || this.getElementById(this.contentieuId)?.childrens?.length===0"
      [@fadeInOut]
    >
      <div class="line-title">
        <p>
          Situation simulée<br />
          au {{stopRealValue}}
        </p>
      </div>
      <div class="item-container">
        <div class="line-item">
          <input
            [value]="getFieldValue('totalIn',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='totalIn'  || paramsToAjust.param2.label==='totalIn'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('totalIn',getFieldValue('totalIn',firstSituationData))}}%

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='totalIn'  || paramsToAjust.param2.label==='totalIn') && getFieldValue('totalIn',simulatedSationData)!==getFieldValue('totalIn',firstSituationData)"
            [@fadeInOut]
          >
            {{ratio(getFieldValue('totalIn',simulatedSationData),getFieldValue('totalIn',firstSituationData))}}%

            <div class="triangle simulated blue"></div>
          </div>
        </div>
        <div class="line-item">
          <input
            [value]="getFieldValue('totalOut',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='totalOut'  || paramsToAjust.param2.label==='totalOut'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('totalOut',getFieldValue('totalOut',firstSituationData))}}%

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='totalOut'  || paramsToAjust.param2.label==='totalOut') && getFieldValue('totalOut',simulatedSationData)!==getFieldValue('totalOut',firstSituationData)"
            [@fadeInOut]
          >
            {{ratio(getFieldValue('totalOut',simulatedSationData),getFieldValue('totalOut',firstSituationData))}}%

            <div class="triangle simulated blue"></div>
          </div>
        </div>
        <div class="line-item">
          <input
            [value]="getFieldValue('lastStock',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='lastStock'  || paramsToAjust.param2.label==='lastStock'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('lastStock',getFieldValue('lastStock',firstSituationData))}}%

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='lastStock'  || paramsToAjust.param2.label==='lastStock') && getFieldValue('lastStock',simulatedSationData)!==getFieldValue('lastStock',firstSituationData)"
            [@fadeInOut]
          >
            {{ratio(getFieldValue('lastStock',simulatedSationData),getFieldValue('lastStock',firstSituationData))}}%

            <div class="triangle simulated blue"></div>
          </div>
        </div>
        <div class="line-item">
          <input
            [value]="getFieldValue('etpMag',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='etpMag'  || paramsToAjust.param2.label==='etpMag'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('etpMag',getFieldValue('etpMag',firstSituationData))}}%

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='etpMag'  || paramsToAjust.param2.label==='etpMag') && getFieldValue('etpMag',simulatedSationData)!==getFieldValue('etpMag',firstSituationData)"
            [@fadeInOut]
          >
            {{ratio(getFieldValue('etpMag',simulatedSationData),getFieldValue('etpMag',firstSituationData))}}%

            <div class="triangle simulated blue"></div>
          </div>
        </div>
        <div class="line-item">
          <input [value]="getFieldValue('',simulatedSationData)" disabled />
        </div>
        <div class="line-item">
          <input [value]="getFieldValue('',simulatedSationData)" disabled />
        </div>
        <div class="line-item">
          <input
            [value]="getFieldValue('realCoverage',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='realCoverage'  || paramsToAjust.param2.label==='realCoverage'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('realCoverage',getFieldValue('realCoverage',firstSituationData))}}pts

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='realCoverage'  || paramsToAjust.param2.label==='realCoverage') && getFieldValue('realCoverage',simulatedSationData)!==getFieldValue('realCoverage',firstSituationData)"
            [@fadeInOut]
          >
            {{calculCoverage(parseFloat(getFieldValue('realCoverage',simulatedSationData)),parseFloat(getFieldValue('realCoverage',firstSituationData)))>=
            0 ? '+' +
            calculCoverage(parseFloat(getFieldValue('realCoverage',simulatedSationData)),parseFloat(getFieldValue('realCoverage',firstSituationData)))
            :
            calculCoverage(parseFloat(getFieldValue('realCoverage',simulatedSationData)),parseFloat(getFieldValue('realCoverage',firstSituationData)))
            }}pts

            <div class="triangle simulated blue"></div>
          </div>
        </div>
        <div class="line-item">
          <input
            [value]="getFieldValue('realDTESInMonths',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='realDTESInMonths'  || paramsToAjust.param2.label==='realDTESInMonths'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('realDTESInMonths',getFieldValue('realDTESInMonths',firstSituationData))}}%

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='realDTESInMonths'  || paramsToAjust.param2.label==='realDTESInMonths') && getFieldValue('realDTESInMonths',simulatedSationData)!==getFieldValue('realDTESInMonths',firstSituationData)"
            [@fadeInOut]
          >
            {{ratio(getFieldValue('realDTESInMonths',simulatedSationData),getFieldValue('realDTESInMonths',firstSituationData))}}%

            <div class="triangle simulated blue"></div>
          </div>
        </div>
        <div class="line-item">
          <input
            [value]="getFieldValue('realTimePerCase',simulatedSationData)"
            disabled
          />
          <div
            class="modified-label simulated"
            *ngIf="paramsToAjust.param1.label==='realTimePerCase'  || paramsToAjust.param2.label==='realTimePerCase'"
            [@fadeInOut]
          >
            {{percentageModifiedInputText('realTimePerCase',getFieldValue('realTimePerCase',firstSituationData,true))}}%

            <div class="triangle simulated"></div>
          </div>
          <div
            class="modified-label simulated blue"
            *ngIf="!(paramsToAjust.param1.label==='realTimePerCase'  || paramsToAjust.param2.label==='realTimePerCase') && getFieldValue('realTimePerCase',simulatedSationData)!==getFieldValue('realTimePerCase',firstSituationData)"
            [@fadeInOut]
          >
            {{ratio(getFieldValue('realTimePerCase',simulatedSationData,true,true),getFieldValue('realTimePerCase',firstSituationData,true,true))}}%

            <div class="triangle simulated blue"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="widgets">
      <aj-loaders-widget
        [dateStart]="startRealValue"
        [dateStop]="stopRealValue"
        [valueAt]="getFieldValue('realDTESInMonths',firstSituationData)"
        [valueProjected]="getFieldValue('realDTESInMonths',projectedSituationData)"
        [valueSimulated]="getFieldValue('realDTESInMonths',simulatedSationData)"
      ></aj-loaders-widget>
      <aj-figures-widget
        style="margin: 0 8px"
        [dateStart]="startRealValue"
        [dateStop]="stopRealValue"
        [valueAt]="getFieldValue('realTimePerCase',firstSituationData)"
        [valueProjected]="getFieldValue('realTimePerCase',projectedSituationData)"
        [valueSimulated]="getFieldValue('realTimePerCase',simulatedSationData)"
      ></aj-figures-widget>
      <aj-dial-widget
        [dateStart]="startRealValue"
        [dateStop]="stopRealValue"
        [valueProjected]="getFieldValue('realCoverage',projectedSituationData)"
        [valueSimulated]="getFieldValue('realCoverage',simulatedSationData)"
      ></aj-dial-widget>
    </div>
  </div>
</aj-wrapper>
<ng-template #actions>
  <aj-select
    title="Contentieux"
    class="contentieux {{disabled}}"
    [defaultRealValue]="'Sélectionner un contentieux'"
    [value]="contentieuId"
    [datas]="formReferentiel"
    (valueChange)="updateReferentielSelected('referentiel', $event)"
    [multiple]="false"
  >
  </aj-select>
  <aj-select
    title="Sous Contentieux"
    class="{{disabled}}"
    [class.notSelectable]="contentieuId===null"
    [value]="subList"
    [datas]="formReferentiel"
    [subList]="subList"
    [parent]="contentieuId"
    (valueChange)="updateReferentielSelected('subList', $event)"
  >
  </aj-select>
  <div class="reset-button {{disabled}}" (click)="resetParams()">
    <p class="title">Reset</p>
  </div>
  <div class="export-button">
    <div class="shape">D</div>
    <p class="title">Exporter en PDF</p>
  </div>
</ng-template>

<div class="background animate__animated animate__fadeIn"></div>

<div
  class="popin animate__animated animate__fadeIn"
  #popin
  *ngIf="leftPosition !== 0"
  (click)="
    $event.stopPropagation();
    filterSelection.close();
    sortSelection.close();
    orderSelection.close()
  "
  [ngStyle]="{ left: leftPosition + 'px', top: topPosition + 'px' }"
>
  <i class="ri-close-fill close" (click)="close.emit()"></i>
  <p class="panel-title">Options d'affichage</p>
  <p class="filter-group">Filtrer par :</p>
  <aj-list-selection
    #filterSelection
    icon="filter-2-line"
    title="Fonction"
    [multiple]="true"
    [list]="filterList"
    [values]="filterValues === null ? [] : filterValues"
    (valuesChanged)="filterValues = $event; updateParams()"
    (onOpen)="sortSelection.close(); orderSelection.close()"
  ></aj-list-selection>

  <p class="filter-group">Trier par :</p>
  <aj-list-selection
    #sortSelection
    title="CritÃ¨re"
    [list]="sortList"
    [value]="sortValue"
    (valueChanged)="sortValue = $event; updateParams()"
    (onOpen)="
      filterSelection.close(); orderSelection.close(); displaySelection.close()
    "
  >
  </aj-list-selection>
  <aj-list-selection
    #orderSelection
    [list]="orderList"
    [value]="orderValue"
    (valueChanged)="orderValue = $event; updateParams()"
    (onOpen)="
      filterSelection.close(); sortSelection.close(); displaySelection.close()
    "
  >
  </aj-list-selection>

  <p class="filter-group">Afficher par :</p>
  <aj-list-selection
    #displaySelection
    title="Affichage"
    [list]="displayList"
    [value]="displayValue"
    (valueChanged)="displayValue = $event; updateParams()"
    (onOpen)="
      sortSelection.close(); orderSelection.close(); filterSelection.close()
    "
  >
  </aj-list-selection>
</div>

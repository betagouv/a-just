<div id="comment-area" [ngClass]="{'close': !showAll, 'drop-down-display': this.comments.length}"
  (click)="showAll=true">
  <div class="header-panel">
    <i class="ri-message-3-line"></i>
    <div>
      <p class="com">Commentaires</p>
      <p *ngIf="commentUpdatedAt" class="com-at">Enregistré {{ formatDate(commentUpdatedAt) }}</p>
    </div>
  </div>
  <div class="properties" *ngIf="isEditing">
    <div class="number-circle">{{currentUser.initials}}</div>
    <label>{{currentUser.firstName + ' ' + currentUser.lastName}}</label>
  </div>
  <div class="panel-content">
    <aj-text-editor #editor [value]="comment || ''" class="no-main-style" (valueChange)="updateComment($event)"
      placeholder="Écrivez un commentaire" [hideToolbar]="true" (focusField)="getFocusOn($event)"
      [resetEditor]="resetEditor" (resetField)="resetEditor = false"
      (click)="$event.stopPropagation()"></aj-text-editor>
  </div>
  <div class="footer-panel" [ngClass]="{'disabled': !currentComment.length}" *ngIf="isEditing">
    <div class="save" (click)="save()">Enregistrer</div>
  </div>

  <passed-comment *ngFor="let com of comments" [comment]="com" [currentHR]="currentHR"
    (deletedComment)="reloadCheck($event)"></passed-comment>

  <div class="fixed-button" (click)="showAll=!showAll;$event.stopPropagation();scrollToTop()"
    *ngIf="this.comments.length">
    <mat-icon class="arrow-list">{{
      showAll ? 'expand_less' : 'expand_more'
      }}</mat-icon>{{ showAll ? 'Réduire':'Tout déplier'}}
  </div>
</div>
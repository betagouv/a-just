<aj-wrapper [titleTemplate]="titleTemplate" [actionTemplate]="actions" backUrl="/ventilations"
  class="content-margin-null">
  <actual-panel-situation *ngFor="let h of histories.slice(0, 1); trackBy: trackByDate" [category]="h.category"
    [etp]="h.etp" [indisponibilities]="h.indisponibilities" [activities]="h.activities" [dateStart]="h.dateStart"
    [dateStop]="h.dateStop" [RHId]="currentHR && currentHR.id"></actual-panel-situation>

  <add-ventilation [human]="currentHR" [activities]="lastActivities" [indisponibilities]="allIndisponibilities"
    (ventilationChange)="onNewVentilation()"></add-ventilation>

  <p *ngIf="histories.length > 1" class="title-history">
    Situations antérieures du {{ categoryName }}
  </p>
  <panel-history-ventilation *ngFor="let h of histories.slice(1); trackBy: trackByDate" [category]="h.category"
    [etp]="h.etp" [indisponibilities]="h.indisponibilities" [activities]="h.activities" [dateStart]="h.dateStart"
    [dateStop]="h.dateStop">
  </panel-history-ventilation>
</aj-wrapper>

<ng-template #actions>
  <div class="actions">
    <aj-date-select title="Date d'arrivée" [value]="currentHR && currentHR.dateStart" [readOnly]="true">
    </aj-date-select>
    <aj-date-select title="Date de départ" [value]="currentHR && currentHR.dateEnd" [readOnly]="true">
    </aj-date-select>
  </div>
</ng-template>

<ng-template #titleTemplate>
  <div class="title">
    <p class="page-name">Fiche individuelle de</p>
    <p class="user-name">
      {{ (currentHR && currentHR.firstName) +' '+ (currentHR &&
      currentHR.lastName) }}
    </p>
  </div>
</ng-template>